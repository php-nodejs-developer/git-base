## GIT - распределённая система контроля версий (у каждого разработчика есть своя копия проекта + история его изменений), которая даёт возможность разработчикам:
1. отслеживать и фиксировать изменения в файлах
2. возвращаться к зафиксированным изменениям
3. синхронизироваться с удаленными репозиториями
4. работать с ветками

## Первоначальная настройка GIT
***выполняется после того, как git был установлен на компьютер или при необходимости внести изменения***

Установить/изменить имя пользователя

    git config --global user.name "Ваше Имя"

Установить/изменить email пользователя

    git config --global user.email ваша@почта.com

Посмотреть значения

    git config --global user.name 
    git config --global user.email

Аргументы:
1. --global (для текущего пользователя)
2. --system (для всех пользователей)
3. без аргумента (на конкретный проект)


***Репозиторий — набор файлов, находящихся под контролем версий git, вместе с историей их изменений и
другой служебной информацией.***


## Способы получения GIT-репозитория

1. Превратить каталог, который не находится под версионным контролем, в репозиторий Git

       git init
***команда создаёт в текущем каталоге новый подкаталог с именем .git, содержащий все необходимые файлы репозитория***

2. Клонировать существующий репозиторий Git

       git clone ссылка-на-репозиторий, например git clone https://github.com/php-nodejs-developer/git-base.git
       git clone ссылка-на-репозиторий новое-имя-каталога

***команда создаёт каталог, инициализирует в нём подкаталог .git, скачивает все данные для этого репозитория и извлекает копию последней версии***

## Файл .gitignore
Имена файлов / папок, которые не должны попадать под версионный контроль необходимо поместить в .gitignore файл

## Проверить текущее состояние репозитория

    git status

### Три основных состояния Git, в которых могут находиться файлы:
1. изменён (modified) - измененные, но не проиндексированные (не подготовленные к сохранению);
2. индексирован (staged) - проиндексированные (готовые к сохранению), но не сохраненные;
3. зафиксирован (committed) - сохраненный.

### Базовый подход в работе с Git:
1. Изменения файлов;
2. Добавление в индекс файлов, которые должны попасть в следующий коммит (изменения в этих файлах будут сохранены);
3. Коммит (фиксация изменений), снимок сохраняется в каталог Git (сохранение состояния проекта).

***Индекс (область индексирования) - это файл, обычно находящийся в каталоге Git, в нём содержится информация о том, что попадёт в следующий коммит***

## Добавление файлов под версионный контроль / Индексация изменённых файлов

    git add имя_файла - добавление одного файла
    git add имя_папки/ - добавление папки со всем ее содержимым
    git add * - добавит все новые  / измененные файлы

## Удаление файлов из индекса

    git rm --cached имя_файла - удаление только из индекса
    git rm -f имя_файла - удаление из индекса и из проекта

## Фиксация изменений (сохранение состояния) В коммит попадут (будут сохранены) только файлы, которые были проиндексированы командой git add

    git commit -m "сообщение коммита"
    git commit -a "сообщение коммита" - аналогично командам (git add * + git commit -m "сообщение коммита")

    git commit --amend - изменить сообщение последнего коммита (через редактор)
    git commit --amend -m "сообщение коммита" - объединение нового коммита с последним и создание нового сообщения к коммиту
    git commit --amend --no-edit - объединение нового коммита с последним без формирование нового сообщения к коммиту

## Просмотр истории коммитов

    git log

[ССЫЛКА: Дополнительная информация о просмотре истории коммитов](https://git-scm.com/book/ru/v2/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-Git-%D0%9F%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80-%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D0%BE%D0%B2)

### Информация о коммите (метаданные):
1. уникальный идентификатор коммита (хеш);
2. имя и email автора коммита;
3. дата создания коммита;
4. комментарий к коммиту.

## Скрытие (прятание) изменений (проект возвращается в состояние последнего коммита)

    git stash - скрытие (прятание)
    git stash list - выводит список всех прятаний
    git stash apply - вернуть последнее прятание
    git stash apply индекс, например  git stash apply stash@{1} - вернуть прятание по индексу
    git stash clear - удалить все прятанья

# Работа с удаленными репозиториями
## Добавление (удаление) удалённых репозиториев:

    git remote add <имя> <url>, например git remote add origin https://github.com/php-nodejs-developer/project.git добавление
    git remote remove <имя>, например git remote remove origin удаление

## Отправка изменений в удаленный репозиторий:

    git push
    git push <имя_удаленного_репозитория> <имя_ветки>, например git push origin master

## Получение изменений из удалённого репозитория:
***данную команду принято также выполнять каждый раз перед оправкой изменений в удаленный репозиторий***

    git pull

## Конфликты слияния при выполнении команды git pull
1. Зафиксировать изменения
2. Выполнить один из пунктов:
    1) ```git pull``` и решить конфликт вручную
    2) ```git pull -Xours``` - автоматически выбрать локальную версию
    3) ```git pull -Xtheirs``` -  автоматически выбрать версию удаленного репозитория

## Ветвления:

    git branch - отображает список веток
    git branch <имя ветки> - создание ветки
    git checkout <имя_ветки> - переключение на ветку
    git push origin <имя ветки> - отправить ветку с изменениями в удаленный репозиторий
    git merge <имя другой ветки> - слияние веток
    git branch -d <имя ветки> - удаление ветки из локального репозитория
    git push origin --delete <имя ветки> - удаление ветки из удаленного репозитория
    git branch --merged - список всех веток, соединённых с текущей
    git branch --no-merged - список всех не соединённых с текущей веток

### Команда git switch (Git 2.23.0.) берет на себя часть функционала git checkout, связанную с переключением веток

    git switch <имя ветки> — переключиться на указанную ветку
    git switch -c <имя ветки> — создать новую ветку и переключиться на нее
    git switch -  - переключение туда-сюда между двумя ветками


## Перемещение по коммитам
1. Checkout

    1) Перейти к предыдущему коммиту (для просмотра):

            git checkout <хэш сумма коммита> - перейти к желаемому коммиту
            git checkout <имя ветки>, например git checkout main (или master)  - вернуться в прежнее состояние
    2) Перейти к предыдущему коммиту в новой ветке (для продолжения работы в ней):

            git checkout -b <имя новой ветки> <хэш сумма коммита>

2. Revert (отмена изменений, произведенных в прошлом отдельным коммитом).

       git revert <хэш сумма коммита> - создает новый коммит, накладывающий обратные изменения

3. Restore (отмена локальных изменений, восстановление файлов).

       git restore <имя_файла> - отменить локальные изменения в конкретном файле
       git restore . - отменить все локальные изменения
       git restore --staged <имя_файла> - вернуть файл из состояния staged, но оставить в нем изменения 
       git restore --source <хеш/весия> <имя_файла> восстановление файла из истории

4. [Reset](https://git-scm.com/book/ru/v2/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-Git-%D0%A0%D0%B0%D1%81%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D0%B5-%D1%82%D0%B0%D0%B9%D0%BD-reset)

       git reset --mixed HEAD~1 - отмена коммита 
       git reset --mixed - отмена последнего коммита
       HEAD~1  указывает, что HEAD должен быть переключен на «коммит перед самым последним»
           --soft - изменения, содержащиеся в отменяемом коммите, НЕ должны исчезнуть (должны быть сохранены в виде проиндексированных - staged)
           --mixed - изменения, содержащиеся в отменяемом коммите, НЕ должны исчезнуть (должны быть сохранены в виде локальных изменений) 
           --hard - изменения, содержащиеся в отменяемом коммите исчезают

## Удаление файлов из удаленного репозитория:
Когда появляется необходимость удалить файлы из удаленного, но не локального репозитория необходимо последовательно
выполнить следующие команды:

1. git rm -r --cached имя-файла или папки
2. Можно добавить названия файлов или папок в .gitignore, чтобы git игнорировал их
3. Выполнить commit
4. Выполнить push

После этого все перечисленные файлы будут удалены из удаленного репозитория, но сохранятся в локальном.

## Вернуть указатель (HEAD) к последнему коммиту:

      git checkout HEAD @{1}

## Удалить все несохраненные в коммит изменения

      git reset --hard

## Вернуться к указанному коммиту, удалив все предыдущие
Если не была выполнена команда git push.

      git reset --hard хеш коммита


## ССЫЛКИ:
1. [Git Book](https://git-scm.com/book/ru/v2)
2. [Интерактивный тур по git](https://githowto.com/ru)
3. [Ветвление в игровой форме](https://learngitbranching.js.org/?locale=ru_RU)

